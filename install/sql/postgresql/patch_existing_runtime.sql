ALTER TABLE users ADD COLUMN twofa_enabled BOOLEAN NOT NULL DEFAULT false;
ALTER TABLE users ADD COLUMN twofa_secret VARCHAR(255) NULL;
ALTER TABLE users ADD COLUMN session_version INTEGER NOT NULL DEFAULT true;
ALTER TABLE news ADD COLUMN views INTEGER NOT NULL DEFAULT false;
CREATE TABLE IF NOT EXISTS visits ( id BIGSERIAL PRIMARY KEY, page VARCHAR(60) NOT NULL, news_id INTEGER NULL, source VARCHAR(20) NOT NULL DEFAULT 'direct', referrer VARCHAR(255) NULL, user_ip VARCHAR(45) NULL, user_agent VARCHAR(255) NULL, os VARCHAR(40) NULL, browser VARCHAR(40) NULL, device VARCHAR(20) NULL, created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, KEY idx_created (created_at), KEY idx_news (news_id), KEY idx_source (source)
 ); ALTER TABLE visits ADD COLUMN news_id INTEGER NULL;
ALTER TABLE visits ADD COLUMN source VARCHAR(20) NOT NULL DEFAULT 'direct';
ALTER TABLE visits ADD COLUMN referrer VARCHAR(255) NULL;
ALTER TABLE visits ADD COLUMN user_ip VARCHAR(45) NULL;
ALTER TABLE visits ADD COLUMN user_agent VARCHAR(255) NULL;
ALTER TABLE visits ADD COLUMN os VARCHAR(40) NULL;
ALTER TABLE visits ADD COLUMN browser VARCHAR(40) NULL;
ALTER TABLE visits ADD COLUMN device VARCHAR(20) NULL;
ALTER TABLE visits ADD COLUMN created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP;
CREATE TABLE IF NOT EXISTS opinion_authors ( id SERIAL PRIMARY KEY, name VARCHAR(255) NOT NULL, slug VARCHAR(255) NOT NULL UNIQUE, page_title VARCHAR(255) NULL, bio TEXT NULL, specialization VARCHAR(255) NULL, social_website VARCHAR(255) NULL, social_twitter VARCHAR(255) NULL, social_facebook VARCHAR(255) NULL, email VARCHAR(190) NULL, avatar VARCHAR(255) NULL, is_active BOOLEAN NOT NULL DEFAULT true, sort_order INTEGER NOT NULL DEFAULT false, display_order INTEGER NOT NULL DEFAULT false, articles_count INTEGER NOT NULL DEFAULT false, created_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
 );
